(this["webpackJsonpdelivery-app"]=this["webpackJsonpdelivery-app"]||[]).push([[0],{21:function(e,t,r){},25:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r.n(n),s=r(16),c=r.n(s),o=(r(21),r(6)),u=r.n(o),i=r(9),l=r(12),d=r(8),p=function(e,t){var r=t.payload;switch(t.type){case"GET_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:r});case"SET_USER":return Object(d.a)(Object(d.a)({},e),{},{user:r});case"SET_SELECTED":return Object(d.a)(Object(d.a)({},e),{},{selected:r});case"GET_BUSY_USERS":return Object(d.a)(Object(d.a)({},e),{},{busy:r});case"SET_USER_KEYS":return Object(d.a)(Object(d.a)({},e),{},{userKeys:r});case"SET_KEYTIME":return Object(d.a)(Object(d.a)({},e),{},{keyTask:r});default:return e}},f=Object(n.createContext)(),m=r(14),b=(r(27),m.a.initializeApp({apiKey:"AIzaSyARQApk17fKDcbQsTyZxvnB_j-uzbAvMtU",authDomain:"hr-devgroup.firebaseapp.com",databaseURL:"https://hr-devgroup.firebaseio.com",projectId:"hr-devgroup",storageBucket:"hr-devgroup.appspot.com",messagingSenderId:"909550374663",appId:"1:909550374663:web:a93730308f7c6a3a3c3fa2",measurementId:"G-9Z7S83SCGF"}),m.a.firestore()),g=[{name:"Frank",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Ffrank.png?alt=media&token=e280d985-39f0-445d-83bf-b428a7747a25",takenFor:[]},{name:"Bruce",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Fbruce.png?alt=media&token=3ba56e4f-5ab1-4f67-9774-5aeee5d933cd",takenFor:[]},{name:"Sonic",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Fsonic.png?alt=media&token=1ab16af8-7e41-4a91-af39-3bd6cf34f2d1",takenFor:[]},{name:"Peter",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Fpeter.png?alt=media&token=1afef1fb-e2a1-4de2-9613-cf81705504dc",takenFor:[]},{name:"Wanda",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Fwanda.png?alt=media&token=5ff7655d-6fde-4d76-be58-872f21d5043e",takenFor:[]},{name:"Clark",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Fclark.png?alt=media&token=308ef229-7921-4199-9bb7-082604eaf16c",takenFor:[]},{name:"Scarlet",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Fscarlet.png?alt=media&token=01fc3339-9215-4785-acf1-8d8b301572b4",takenFor:[]},{name:"Toreto",segment:[],avatar:"https://firebasestorage.googleapis.com/v0/b/hr-devgroup.appspot.com/o/dev-test-img%2Ftoreto.png?alt=media&token=de644b3d-123c-4560-918f-3d4dd4eec4b4",takenFor:[]}],h=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.map((function(e){return v(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.collection("delivers").doc(),e.next=3,r.set(t).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=h,x=r(1),O=function(e){var t=Object(n.useReducer)(p,{users:[],user:{},keyTask:null,selected:!1,userKeys:[],busy:!1}),r=Object(l.a)(t,2),a=r[0],s=r[1],c=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("delivers").get().then((function(e){o(e)})).catch((function(e){return console.error("error",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=[],t.empty?j().then((function(){return c()})).catch((function(e){return console.error(e)})):t.forEach((function(e){e.data().segment.forEach((function(e){return n.push(e)})),r.push(e.data())})),r.length>0&&(s({type:"GET_USERS",payload:r}),s({type:"SET_USER_KEYS",payload:n}),s({type:"SET_SELECTED",payload:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e,t){var r=null;return(r=e.filter((function(e){return e===t?e:null}))).pop(),r},m=function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=atob(localStorage.getItem("userToken")),e.t0=r,e.next="save"===e.t0?4:"remove"===e.t0?7:10;break;case 4:return t.takenFor.push(n),t.segment.push(a.keyTask),e.abrupt("break",11);case 7:return t.segment=t.segment.filter((function(e){return e!==a.keyTask})),t.takenFor=d(t.takenFor,n),e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:return e.next=13,b.collection("delivers").where("name","==",t.name).get().then((function(e){return e.forEach((function(e){return g(e.id,t)}))}));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.collection("delivers").doc(t),e.next=3,n.update(r).then((function(){return c()})).then((function(){return s({type:"SET_SELECTED",payload:!1})})).catch((function(e){return console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(x.jsx)(f.Provider,{value:{users:a.users,user:a.user,selected:a.selected,busy:a.busy,keyTask:a.keyTask,userKeys:a.userKeys,getUsers:c,setTaskkey:function(e){s({type:"SET_KEYTIME",payload:e})},setUser:m,setSelected:function(e){s({type:"SET_SELECTED",payload:e})},getBusyUsers:function(e){s({type:"GET_BUSY_USERS",payload:e})}},children:e.children})},y=function(e,t,r,n){for(var a=[],s=new Date("2021-01-01T".concat(t,":").concat(r,":").concat(n)),c=0;c<e;c++)0===c?s.setMinutes(s.getMinutes()):s.setMinutes(s.getMinutes()+30),a.push(s.getHours()+":"+("00"+s.getMinutes()).slice(-2));return a},k=function(e,t){var r=t.split(":"),n=e.split(":"),a=new Date,s=new Date;a.setHours(r[0],r[1],r[2]),s.setHours(n[0],n[1],n[2]),a.setHours(a.getHours()-s.getHours(),a.getMinutes()-s.getMinutes(),a.getSeconds()-s.getSeconds());var c=2*a.getHours()+(a.getMinutes()>30?1:0);return y(c,n[0],n[1],n[2])},w=r(29),S=function(e){return Object(x.jsx)("h1",{className:"text-3xl text-gray-600 text-center font-bold mt-6 md:mt-0 uppercase",children:e.children})};var E=function(e){var t=e.user,r=e.action,n=e.removeDriver,a=e.saveDriver;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"flex w-40 h-16 md:h-20 md:m-2 justify-start items-center cursor-pointer",onClick:function(){return function(e){switch(r){case"save":a(e);break;case"remove":n(e)}}(t)},children:[Object(x.jsx)("img",{src:t.avatar,alt:t.name.toUpperCase(),className:"w-12 h-12 md:w-20 md:h-20 object-contain rounded-full shadow-lg border-2 bg-gray-50 border-gray-100 transition transform duration-300 delay-75 hover:scale-105 hover:border-8"}),Object(x.jsx)("p",{className:"ml-2 text-center text-lg font-semibold text-gray-600 uppercase",children:t.name})]})})},T=(r(25),function(){return Object(x.jsx)("div",{className:"fixed top-0 left-0 z-50 w-screen h-screen flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.3)"},children:Object(x.jsxs)("div",{className:"bg-white border py-2 px-5 rounded-lg flex items-center flex-col",children:[Object(x.jsxs)("div",{className:"loader-dots block relative w-20 h-5 mt-2",children:[Object(x.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"}),Object(x.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"}),Object(x.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"}),Object(x.jsx)("div",{className:"absolute top-0 mt-1 w-3 h-3 rounded-full bg-green-500"})]}),Object(x.jsx)("div",{className:"text-gray-500 text-xs font-light mt-2 text-center",children:"Please wait..."})]})})});var F=function(){var e=atob(localStorage.getItem("userToken")),t=Object(n.useContext)(f),r=t.users,a=t.keyTask,s=t.setUser,c=Object(n.useState)([]),o=Object(l.a)(c,2),u=o[0],i=o[1],d=Object(n.useState)([]),p=Object(l.a)(d,2),m=p[0],b=p[1],g=Object(n.useState)(!1),h=Object(l.a)(g,2),v=h[0],j=h[1],O=function(e){return s(e,"save").then((function(){return j(!0)}))},y=function(e){return s(e,"remove").then((function(){return j(!0)}))};return Object(n.useEffect)((function(){!function(){var t=[],n=[];r.forEach((function(r){r.segment.includes(a)||t.push(r),i(t),r.segment.includes(a)&&r.takenFor.forEach((function(t){t===e&&n.push(r)})),b(n)}))}()}),[]),Object(x.jsx)(x.Fragment,{children:v?Object(x.jsx)(T,{}):Object(x.jsx)("div",{className:"w-11/12 mx-auto",children:Object(x.jsxs)("div",{className:"px-4 transform md:absolute left-1/2 top-1/2 md:-translate-y-1/2  md:-translate-x-1/2",children:[u.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(S,{children:"Select your driver to save"}),Object(x.jsx)("div",{className:"w-full flex flex-col items-center justify-center mt-3 md:w-5/6 mx-auto md:flex-row md:flex-wrap",children:u.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsx)(E,{user:e,index:t,action:"save",saveDriver:O})},t)}))})]}):null,m.length>0?Object(x.jsxs)("div",{className:"mt-6",children:[Object(x.jsx)(S,{children:"Select your driver to remove"}),Object(x.jsx)("div",{className:"w-full flex flex-col items-center justify-center mt-3 md:w-5/6 mx-auto md:flex-row md:flex-wrap",children:m.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsx)(E,{user:e,index:t,action:"remove",removeDriver:y})},t)}))})]}):null]})})})};var N=function(){var e=k("08:00:00","20:00:00"),t=Object(n.useContext)(f),r=t.getUsers,a=t.users,s=t.userKeys,c=t.keyTask,o=t.setTaskkey,u=t.selected,i=t.setSelected,l=t.getBusyUsers,d=function(e){return s.reduce((function(t,r){return r===e&&t.push(r),t}),[])},p=function(e){var t=d(e);return s.includes(e)?t.length===a.length?"bg-red-400 border-red-500 hover:bg-red-500 hover:border-red-600":"bg-green-400 border-green-500 hover:bg-green-500 hover:border-green-600":c&&e===c?"bg-purple-400 border-purple-500 hover:bg-purple-500 hover:border-purple-600":"bg-blue-400 border-blue-500 hover:bg-blue-500 hover:border-blue-600"},m=function(e,t){return e.segment.map((function(r,n){return r===t?Object(x.jsx)("div",{className:"flex justify-start items-center mr-1 object-fill rounded-full",children:Object(x.jsx)("img",{className:"h-5",src:e.avatar,alt:e.name})},n):null}))};return Object(n.useEffect)((function(){r(),localStorage.getItem("userToken")||localStorage.setItem("userToken",btoa(Object(w.a)()))}),[]),Object(x.jsx)(x.Fragment,{children:u?Object(x.jsx)(F,{}):a.length>0?Object(x.jsxs)("div",{className:"md:absolute top-1/2 transform md:-translate-y-1/2",children:[Object(x.jsx)(S,{children:"Schedule"}),Object(x.jsx)("p",{className:"text-center text-lg font-medium text-gray-700 py-2",children:"Select your time segment..."}),Object(x.jsx)("div",{className:"w-11/12 mx-auto flex flex-col items-center md:max-h-screen md:justify-center md:flex-row md:flex-wrap",children:e.map((function(e,t){return Object(x.jsxs)("div",{onClick:function(){return function(e){d(e).length===a.length?(o(e),l(!0),i(!0)):(i(!0),o(e))}(t+1)},className:"relative w-72 m-2 py-2 text-center text-lg text-white font-semibold rounded-lg border shadow-xl cursor-pointer transform transition hover:scale-105 duration-300 delay-150 ".concat(p(t+1)),children:[e,Object(x.jsx)("div",{className:"absolute flex -bottom-1 -right-1 cursor-default",children:s.includes(t+1)?a.map((function(e,r){return Object(x.jsx)("div",{children:m(e,t+1)},r)})):null})]},t)}))})]}):Object(x.jsx)(T,{})})};var U=function(){return Object(x.jsx)(O,{children:Object(x.jsx)(N,{})})},_=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,30)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root")),_()}},[[26,1,2]]]);
//# sourceMappingURL=main.0ff90f62.chunk.js.map